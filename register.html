<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Register - Coffee Shop</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<style>
			body {
				background: linear-gradient(135deg, #6f4e37, #d3c0b4);
				height: 100vh;
				display: flex;
				justify-content: center;
				align-items: center;
			}
			.card {
				border-radius: 12px;
				box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
			}
			h2 {
				color: #6f4e37;
			}
		</style>
	</head>
	<body>
		<div class="card p-4 col-md-6">
			<h3 class="text-center mb-4">Register</h3>
			<form id="registerForm">
				<div class="mb-2">
					<label class="form-label">Nama</label>
					<input type="text" id="nama" class="form-control" required />
				</div>
				<div class="mb-2">
					<label class="form-label">Nomor Telepon</label>
					<input type="text" id="telepon" class="form-control" required />
				</div>
				<div class="mb-2">
					<label class="form-label">Alamat</label>
					<textarea id="alamat" class="form-control" required></textarea>
				</div>
				<div class="mb-2">
					<label class="form-label">Email</label>
					<input type="email" id="email" class="form-control" required />
				</div>
				<div class="mb-2">
					<label class="form-label">Password</label>
					<input type="password" id="password" class="form-control" required />
				</div>
				<button type="submit" class="btn btn-success w-100">Register</button>
			</form>
			<p class="mt-3 text-center">
				Sudah punya akun? <a href="login.html">Login</a>
			</p>
		</div>

		<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
		<script src="firebase-config.js"></script>
		<script>
			document
				.getElementById("registerForm")
				.addEventListener("submit", (e) => {
					e.preventDefault();
					const nama = document.getElementById("nama").value;
					const telepon = document.getElementById("telepon").value;
					const alamat = document.getElementById("alamat").value;
					const email = document.getElementById("email").value;
					const password = document.getElementById("password").value;

					auth
						.createUserWithEmailAndPassword(email, password)
						.then((userCredential) => {
							const user = userCredential.user;

							return user.sendEmailVerification().then(() => {
								return db.ref("users/" + user.uid).set({
									nama,
									telepon,
									alamat,
									email,
								});
							});
						})
						.then(() => {
							alert(
								"Registrasi berhasil! Silakan cek email Anda untuk verifikasi sebelum login."
							);
							window.location.href = "login.html";
						})
						.catch((error) => {
							alert("Error: " + error.message);
						});
				});
		</script>
	</body>
</html>
